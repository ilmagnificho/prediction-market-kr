<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸ì‚¬ì´íŠ¸ ë§ˆì¼“ - ë¯¸ë˜ ì˜ˆì¸¡ ì±Œë¦°ì§€</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #f8f9fa;
        }
        
        .vote-bar {
            transition: width 0.3s ease;
        }
        
        .comment-item {
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .btn-primary:hover {
            opacity: 0.9;
        }

        /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ê³ ì • */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 28rem; /* max-w-md */
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ì´ˆê¸° ìƒ˜í”Œ ë°ì´í„° (Votes -> Pool (ì½”ì¸ ë² íŒ…ì•¡))
        const initialPolls = [
            {
                id: 1,
                question: "2025ë…„ ì½”ìŠ¤í”¼ 3000 ëŒíŒŒí• ê¹Œ?",
                category: "ê²½ì œ",
                yesPool: 245000,
                noPool: 189000,
                endDate: "2025-12-31",
                comments: [
                    { id: 1, author: "ìµëª…1", text: "[YES ì˜ˆì¸¡ ê·¼ê±°] ê¸ˆë¦¬ ì¸í•˜ë˜ë©´ ê°€ëŠ¥í• ë“¯", time: "5ë¶„ ì „", likes: 12 },
                    { id: 2, author: "ìµëª…2", text: "[NO ì˜ˆì¸¡ ê·¼ê±°] ã„´ã„´ ë¯¸êµ­ ê²½ê¸° ë‘”í™” ì˜¤ë©´ í˜ë“¦", time: "10ë¶„ ì „", likes: 8 }
                ]
            },
            {
                id: 2,
                question: "ì†í¥ë¯¼ ì´ë²ˆ ì‹œì¦Œ 20ê³¨ ì´ìƒ?",
                category: "ìŠ¤í¬ì¸ ",
                yesPool: 412000,
                noPool: 278000,
                endDate: "2025-05-31",
                comments: [
                    { id: 3, author: "ì¶•êµ¬íŒ¬", text: "[YES ì˜ˆì¸¡ ê·¼ê±°] í¼ ë¯¸ì³¤ìŒ ã…‡ã…ˆ?", time: "1ì‹œê°„ ì „", likes: 34 }
                ]
            },
            {
                id: 3,
                question: "ì˜¬í•´ ì• í”Œ í´ë”ë¸” ì•„ì´í° ì¶œì‹œ?",
                category: "í…Œí¬",
                yesPool: 15600,
                noPool: 52300,
                endDate: "2025-12-31",
                comments: []
            },
            {
                id: 4,
                question: "ì„œìš¸ ì§‘ê°’ ì—°ë§ê¹Œì§€ 10% ì´ìƒ í•˜ë½?",
                category: "ë¶€ë™ì‚°",
                yesPool: 389000,
                noPool: 412000,
                endDate: "2025-12-31",
                comments: [
                    { id: 4, author: "ë¶€ë¦°ì´", text: "[NO ì˜ˆì¸¡ ê·¼ê±°] ê¸ˆë¦¬ ë™ê²°ì´ë¼ ë” ì•ˆë–¨ì–´ì§ˆë“¯", time: "30ë¶„ ì „", likes: 15 }
                ]
            }
        ];

        // ì„ì‹œ ë¦¬ë”ë³´ë“œ ë°ì´í„°
        const fakeLeaderboard = [
            { id: 1, name: 'ì˜ˆì§€ë ¥ ë§ˆìŠ¤í„°', coins: 1500000 },
            { id: 2, name: 'ì •ì±… ë¶„ì„ê°€', coins: 950000 },
            { id: 3, name: 'ê²½ì œì˜ ì‹ ', coins: 720000 },
            { id: 4, name: 'ì´‰ì´ì¢‹ì•„', coins: 450000 },
            { id: 5, name: 'ë¯¸ë˜ ê´€ì°°ì', coins: 210000 },
        ];
        
        // --- 1. ìœ ì € ë° ì¬í™”(ì½”ì¸) ìƒíƒœ ê´€ë¦¬ ---
        function App() {
            // Polls (ì±Œë¦°ì§€) ìƒíƒœ ê´€ë¦¬
            const [polls, setPolls] = useState(() => {
                const saved = localStorage.getItem('polls');
                return saved ? JSON.parse(saved) : initialPolls;
            });
            
            // User (ìœ ì €) ìƒíƒœ ê´€ë¦¬
            const [user, setUser] = useState(() => {
                const savedUser = localStorage.getItem('user');
                return savedUser ? JSON.parse(savedUser) : { name: 'ì´ˆë³´ ì˜ˆì–¸ê°€', coins: 10000 };
            });

            // ë·° ê´€ë¦¬
            const [currentView, setCurrentView] = useState('home'); // home, leaderboard, create, detail
            const [selectedPoll, setSelectedPoll] = useState(null);
            
            // ìƒˆ ì±Œë¦°ì§€ ìƒì„± í¼ ìƒíƒœ
            const [newPollQuestion, setNewPollQuestion] = useState('');
            const [newPollCategory, setNewPollCategory] = useState('ì¼ë°˜');
            const [newPollEndDate, setNewPollEndDate] = useState('');
            
            // ëŒ“ê¸€ í¼ ìƒíƒœ
            const [commentText, setCommentText] = useState('');

            // Polls ë°ì´í„°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ localStorageì— ì €ì¥
            useEffect(() => {
                localStorage.setItem('polls', JSON.stringify(polls));
            }, [polls]);

            // User ë°ì´í„°ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ localStorageì— ì €ì¥
            useEffect(() => {
                localStorage.setItem('user', JSON.stringify(user));
            }, [user]);

            // --- 2. í•µì‹¬ ê¸°ëŠ¥ í•¨ìˆ˜ (ë² íŒ…, ëŒ“ê¸€, ì±Œë¦°ì§€ ìƒì„±) ---

            // 'íˆ¬í‘œ' ëŒ€ì‹  'ë² íŒ…' ê¸°ëŠ¥
            const handleBet = (pollId, voteType, amount, reason) => {
                const betAmount = parseInt(amount, 10);
                if (!betAmount || betAmount <= 0) {
                    alert('ë² íŒ…í•  ì½”ì¸ ìˆ˜ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                if (betAmount > user.coins) {
                    alert('ë³´ìœ  ì½”ì¸ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.');
                    return;
                }

                // 1. ìœ ì € ì½”ì¸ ì°¨ê°
                setUser(prev => ({ ...prev, coins: prev.coins - betAmount }));

                // 2. ì±Œë¦°ì§€ í’€(Pool)ì— ì½”ì¸ ì¶”ê°€
                setPolls(polls.map(poll => {
                    if (poll.id === pollId) {
                        if (voteType === 'yes') {
                            return { ...poll, yesPool: poll.yesPool + betAmount };
                        } else {
                            return { ...poll, noPool: poll.noPool + betAmount };
                        }
                    }
                    return poll;
                }));

                // 3. (ì¤‘ìš”) ì˜ˆì¸¡ ê·¼ê±°ë¥¼ ëŒ“ê¸€ë¡œ ìë™ ì¶”ê°€
                if (reason.trim()) {
                    const reasonText = `[${voteType.toUpperCase()} ì˜ˆì¸¡ ê·¼ê±°] ${reason}`;
                    addComment(pollId, reasonText);
                }
            };
            
            // ëŒ“ê¸€ ì¶”ê°€ ê¸°ëŠ¥ (handleBetì—ì„œë„ í˜¸ì¶œ)
            const addComment = (pollId, text) => {
                if (!text.trim()) return;
                
                setPolls(polls.map(poll => {
                    if (poll.id === pollId) {
                        const newComment = {
                            id: Date.now(),
                            author: user.name, // ìœ ì € ì´ë¦„ìœ¼ë¡œ ìë™ ì…ë ¥
                            text: text,
                            time: 'ë°©ê¸ˆ ì „',
                            likes: 0
                        };
                        return { ...poll, comments: [newComment, ...poll.comments] };
                    }
                    return poll;
                }));
                
                setCommentText(''); // ìˆ˜ë™ ëŒ“ê¸€ì°½ ì´ˆê¸°í™”
            };

            const likeComment = (pollId, commentId) => {
                setPolls(polls.map(poll => {
                    if (poll.id === pollId) {
                        return {
                            ...poll,
                            comments: poll.comments.map(comment => 
                                comment.id === commentId 
                                    ? { ...comment, likes: comment.likes + 1 }
                                    : comment
                            )
                        };
                    }
                    return poll;
                }));
            };

            // ì±Œë¦°ì§€(Poll) ìƒì„±
            const createPoll = () => {
                if (!newPollQuestion.trim() || !newPollEndDate) {
                    alert('ì§ˆë¬¸ê³¼ ì¢…ë£Œì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                    return;
                }

                const newPoll = {
                    id: Date.now(),
                    question: newPollQuestion,
                    category: newPollCategory,
                    yesPool: 0, // 0 ì½”ì¸ì—ì„œ ì‹œì‘
                    noPool: 0,
                    endDate: newPollEndDate,
                    comments: []
                };

                setPolls([newPoll, ...polls]);
                setNewPollQuestion('');
                setNewPollCategory('ì¼ë°˜');
                setNewPollEndDate('');
                setCurrentView('home');
            };

            // ë°ì¼ë¦¬ ë³´ë„ˆìŠ¤
            const getDailyBonus = () => {
                // TODO: ì‹¤ì œë¡œëŠ” 24ì‹œê°„ ì œí•œ ë¡œì§ í•„ìš”
                setUser(prev => ({ ...prev, coins: prev.coins + 1000 }));
                alert('ë°ì¼ë¦¬ ë³´ë„ˆìŠ¤ 1,000 ì½”ì¸ íšë“! ğŸª™');
            };

            // ë·° ë¼ìš°íŒ…
            const viewPollDetail = (poll) => {
                setSelectedPoll(poll);
                setCurrentView('detail');
            };

            // --- 3. UI ì»´í¬ë„ŒíŠ¸ ---
            
            // ì±Œë¦°ì§€ ì¹´ë“œ (í™ˆ)
            const PollCard = ({ poll }) => {
                const totalPool = poll.yesPool + poll.noPool;
                const yesPercent = totalPool > 0 ? (poll.yesPool / totalPool * 100).toFixed(1) : 50;
                const noPercent = totalPool > 0 ? (poll.noPool / totalPool * 100).toFixed(1) : 50;

                return (
                    <div 
                        className="bg-white rounded-lg p-4 mb-3 shadow-sm cursor-pointer hover:shadow-md transition-shadow"
                        onClick={() => viewPollDetail(poll)}
                    >
                        <div className="flex items-start justify-between mb-2">
                            <span className="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-medium">
                                {poll.category}
                            </span>
                            <span className="text-xs text-gray-500">~{poll.endDate}</span>
                        </div>
                        
                        <h3 className="text-base font-bold mb-3 text-gray-800 leading-snug">
                            {poll.question}
                        </h3>
                        
                        <div className="space-y-2 mb-3">
                            <div className="flex items-center">
                                <span className="text-sm font-medium text-green-600 w-16">YES</span>
                                <div className="flex-1 bg-gray-100 rounded-full h-6 overflow-hidden">
                                    <div 
                                        className="vote-bar bg-gradient-to-r from-green-400 to-green-500 h-full flex items-center justify-end pr-2"
                                        style={{ width: `${yesPercent}%` }}
                                    >
                                        <span className="text-xs font-bold text-white">{yesPercent}%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="flex items-center">
                                <span className="text-sm font-medium text-red-600 w-16">NO</span>
                                <div className="flex-1 bg-gray-100 rounded-full h-6 overflow-hidden">
                                    <div 
                                        className="vote-bar bg-gradient-to-r from-red-400 to-red-500 h-full flex items-center justify-end pr-2"
                                        style={{ width: `${noPercent}%` }}
                                    >
                                        <span className="text-xs font-bold text-white">{noPercent}%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div className="flex items-center justify-between text-xs text-gray-500">
                            <span>ì´ {totalPool.toLocaleString()} ì½”ì¸ ì°¸ì—¬</span>
                            <span>ğŸ’¬ {poll.comments.length}ê°œ ëŒ“ê¸€</span>
                        </div>
                    </div>
                );
            };

            // í™ˆ í™”ë©´
            const HomeScreen = () => (
                <div className="min-h-screen pb-20">
                    {/* Header */}
                    <div className="bg-white shadow-sm sticky top-0 z-10">
                        <div className="max-w-md mx-auto px-4 py-4">
                            <div className="flex justify-between items-center">
                                <h1 className="text-2xl font-bold text-gray-800">ğŸ”® ì¸ì‚¬ì´íŠ¸ ë§ˆì¼“</h1>
                                <div className="text-right">
                                    <span className="font-bold text-purple-700">ğŸª™ {user.coins.toLocaleString()}</span>
                                    <div className="text-xs text-gray-600">{user.name}</div>
                                </div>
                            </div>
                            <p className="text-sm text-gray-600 mt-1">ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•˜ê³  ì½”ì¸ì„ íšë“í•˜ì„¸ìš”!</p>
                        </div>
                    </div>

                    {/* Poll List */}
                    <div className="max-w-md mx-auto px-4 py-4">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-lg font-bold text-gray-800">ğŸ”¥ ì§„í–‰ì¤‘ì¸ ì±Œë¦°ì§€</h2>
                            <button 
                                onClick={getDailyBonus}
                                className="text-xs bg-yellow-300 text-yellow-900 font-medium px-3 py-1 rounded-full hover:bg-yellow-400"
                            >
                                ğŸ ë°ì¼ë¦¬ ë³´ë„ˆìŠ¤
                            </button>
                        </div>
                        
                        {polls.map(poll => (
                            <PollCard key={poll.id} poll={poll} />
                        ))}
                    </div>
                </div>
            );

            // ì±Œë¦°ì§€ ìƒì„± í™”ë©´
            const CreatePollScreen = () => (
                <div className="min-h-screen bg-white">
                    <div className="max-w-md mx-auto">
                        {/* Header */}
                        <div className="flex items-center justify-between p-4 border-b">
                            <div className="w-16"></div> {/* For spacing */}
                            <h2 className="text-lg font-bold">ìƒˆ ì±Œë¦°ì§€ ë§Œë“¤ê¸°</h2>
                            <button 
                                onClick={createPoll}
                                className="text-purple-600 font-bold w-16 text-right"
                            >
                                ì™„ë£Œ
                            </button>
                        </div>

                        {/* Form */}
                        <div className="p-4 space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">ì§ˆë¬¸ *</label>
                                <textarea
                                    value={newPollQuestion}
                                    onChange={(e) => setNewPollQuestion(e.target.value)}
                                    placeholder="ì˜ˆ: 2025ë…„ ë¹„íŠ¸ì½”ì¸ 10ë§Œë¶ˆ ëŒíŒŒí• ê¹Œ?"
                                    className="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    rows="3"
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">ì¹´í…Œê³ ë¦¬</label>
                                <select
                                    value={newPollCategory}
                                    onChange={(e) => setNewPollCategory(e.target.value)}
                                    className="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                >
                                    <option>ì¼ë°˜</option>
                                    <option>ê²½ì œ</option>
                                    <option>ìŠ¤í¬ì¸ </option>
                                    <option>í…Œí¬</option>
                                    <option>ë¶€ë™ì‚°</option>
                                    <option>ì •ì¹˜</option>
                                    <option>ì—°ì˜ˆ</option>
                                </select>
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">ì¢…ë£Œì¼ *</label>
                                <input
                                    type="date"
                                    value={newPollEndDate}
                                    onChange={(e) => setNewPollEndDate(e.target.value)}
                                    className="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-purple-500"
                                />
                            </div>

                            <div className="bg-purple-50 rounded-lg p-4 mt-6">
                                <h3 className="font-bold text-purple-900 mb-2">ğŸ’¡ ì±Œë¦°ì§€ ì‘ì„± íŒ</h3>
                                <ul className="text-sm text-purple-800 space-y-1">
                                    <li>â€¢ YES/NOë¡œ ë‹µë³€ ê°€ëŠ¥í•œ ì§ˆë¬¸ì´ ì¢‹ì•„ìš”</li>
                                    <li>â€¢ ëª…í™•í•œ ê¸°ì¤€ê³¼ ê¸°í•œì„ ì„¤ì •í•´ì£¼ì„¸ìš”</li>
                                    <li>â€¢ ë…¼ìŸì ì´ê³  ì¬ë¯¸ìˆëŠ” ì£¼ì œê°€ ì¸ê¸°!</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            );
            
            // ì±Œë¦°ì§€ ìƒì„¸ ë° ë² íŒ… í™”ë©´
            const PollDetailScreen = () => {
                const poll = polls.find(p => p.id === selectedPoll.id);
                const totalPool = poll.yesPool + poll.noPool;
                const yesPercent = totalPool > 0 ? (poll.yesPool / totalPool * 100).toFixed(1) : 50;
                const noPercent = totalPool > 0 ? (poll.noPool / totalPool * 100).toFixed(1) : 50;
                
                // ë² íŒ… ê¸ˆì•¡, ì˜ˆì¸¡ ê·¼ê±° ìƒíƒœ
                const [betAmount, setBetAmount] = useState(100);
                const [betReason, setBetReason] = useState('');

                return (
                    <div className="min-h-screen bg-gray-50 pb-20">
                        <div className="max-w-md mx-auto bg-white min-h-screen">
                            {/* Header */}
                            <div className="sticky top-0 bg-white border-b z-10 p-4">
                                <button 
                                    onClick={() => setCurrentView('home')}
                                    className="text-gray-600 mb-2"
                                >
                                    â† ë’¤ë¡œ
                                </button>
                            </div>

                            {/* Poll Info */}
                            <div className="p-4 border-b">
                                <div className="flex items-center justify-between mb-3">
                                    <span className="text-xs bg-purple-100 text-purple-700 px-3 py-1 rounded-full font-medium">
                                        {poll.category}
                                    </span>
                                    <span className="text-xs text-gray-500">ë§ˆê°: {poll.endDate}</span>
                                </div>
                                
                                <h2 className="text-xl font-bold text-gray-800 mb-4 leading-tight">
                                    {poll.question}
                                </h2>

                                {/* --- 4. ë² íŒ… UI (í•µì‹¬ ê°œì„ ) --- */}
                                <div className="bg-gray-50 rounded-lg p-4 space-y-3 mb-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">ë² íŒ…í•  ì½”ì¸</label>
                                        <input
                                            type="number"
                                            value={betAmount}
                                            onChange={(e) => setBetAmount(e.target.value)}
                                            className="w-full border border-gray-300 rounded-lg p-2 text-center font-bold text-lg"
                                        />
                                        <div className="text-xs text-gray-600 text-right mt-1">
                                            ë³´ìœ  ì½”ì¸: {user.coins.toLocaleString()} ğŸª™
                                        </div>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">ì˜ˆì¸¡ ê·¼ê±° (ì„ íƒ)</label>
                                        <textarea
                                            value={betReason}
                                            onChange={(e) => setBetReason(e.target.value)}
                                            placeholder="ì˜ˆì¸¡ ê·¼ê±°ë¥¼ ê³µìœ í•˜ë©´ ì»¤ë®¤ë‹ˆí‹°ì— ë„ì›€ì´ ë©ë‹ˆë‹¤."
                                            className="w-full border border-gray-300 rounded-lg p-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"
                                            rows="2"
                                        />
                                    </div>

                                    {/* Bet Buttons */}
                                    <div className="grid grid-cols-2 gap-3">
                                        <button
                                            onClick={() => handleBet(poll.id, 'yes', betAmount, betReason)}
                                            className="bg-gradient-to-r from-green-400 to-green-500 text-white font-bold py-3 rounded-lg shadow-md hover:shadow-lg transition-all text-sm"
                                        >
                                            âœ… YESì— {parseInt(betAmount || 0).toLocaleString()} ì½”ì¸ ì˜ˆì¸¡
                                        </button>
                                        <button
                                            onClick={() => handleBet(poll.id, 'no', betAmount, betReason)}
                                            className="bg-gradient-to-r from-red-400 to-red-500 text-white font-bold py-3 rounded-lg shadow-md hover:shadow-lg transition-all text-sm"
                                        >
                                            âŒ NOì— {parseInt(betAmount || 0).toLocaleString()} ì½”ì¸ ì˜ˆì¸¡
                                        </button>
                                    </div>
                                </div>
                                
                                {/* Results */}
                                <div className="bg-gray-50 rounded-lg p-4">
                                    <div className="flex justify-between items-center mb-3">
                                        <span className="text-sm font-bold text-gray-700">ì‹¤ì‹œê°„ ì˜ˆì¸¡ í’€</span>
                                        <span className="text-sm text-gray-600">ì´ {totalPool.toLocaleString()} ì½”ì¸</span>
                                    </div>
                                    
                                    <div className="space-y-3">
                                        <div>
                                            <div className="flex justify-between text-sm mb-1">
                                                <span className="font-medium text-green-600">YES</span>
                                                <span className="font-bold text-green-600">{yesPercent}%</span>
                                            </div>
                                            <div className="bg-gray-200 rounded-full h-3 overflow-hidden">
                                                <div 
                                                    className="vote-bar bg-gradient-to-r from-green-400 to-green-500 h-full"
                                                    style={{ width: `${yesPercent}%` }}
                                                />
                                            </div>
                                            <div className="text-xs text-gray-600 mt-1">{poll.yesPool.toLocaleString()} ì½”ì¸</div>
                                        </div>
                                        
                                        <div>
                                            <div className="flex justify-between text-sm mb-1">
                                                <span className="font-medium text-red-600">NO</span>
                                                <span className="font-bold text-red-600">{noPercent}%</span>
                                            </div>
                                            <div className="bg-gray-200 rounded-full h-3 overflow-hidden">
                                                <div 
                                                    className="vote-bar bg-gradient-to-r from-red-400 to-red-500 h-full"
                                                    style={{ width: `${noPercent}%` }}
                                                />
                                            </div>
                                            <div className="text-xs text-gray-600 mt-1">{poll.noPool.toLocaleString()} ì½”ì¸</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Comments Section */}
                            <div className="p-4">
                                <h3 className="text-lg font-bold text-gray-800 mb-4">
                                    ğŸ’¬ ê·¼ê±° ë° í† ë¡  {poll.comments.length}
                                </h3>

                                {/* Comment Input (ìˆ˜ë™ ì…ë ¥) */}
                                <div className="mb-4 bg-gray-50 rounded-lg p-3">
                                    <div className="text-sm font-medium mb-2">{user.name} (ìœ¼)ë¡œ ëŒ“ê¸€ ë‹¬ê¸°:</div>
                                    <textarea
                                        value={commentText}
                                        onChange={(e) => setCommentText(e.target.value)}
                                        placeholder="ììœ ë¡œìš´ ì˜ê²¬ì„ ë‚¨ê²¨ì£¼ì„¸ìš”..."
                                        className="w-full border border-gray-300 rounded-lg px-3 py-2 mb-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        rows="2"
                                    />
                                    <button
                                        onClick={() => addComment(poll.id, commentText)}
                                        className="w-full btn-primary text-white font-medium py-2 rounded-lg text-sm"
                                    >
                                        ëŒ“ê¸€ ì‘ì„±
                                    </button>
                                </div>

                                {/* Comments List */}
                                <div className="space-y-3">
                                    {poll.comments.length === 0 ? (
                                        <div className="text-center py-8 text-gray-500">
                                            <div className="text-4xl mb-2">ğŸ’­</div>
                                            <div className="text-sm">ì²« ëŒ“ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</div>
                                        </div>
                                    ) : (
                                        poll.comments.map(comment => (
                                            <div key={comment.id} className="comment-item border-b pb-3">
                                                <div className="flex items-start justify-between mb-1">
                                                    <span className="font-medium text-sm text-gray-800">
                                                        {comment.author}
                                                    </span>
                                                    <span className="text-xs text-gray-500">{comment.time}</span>
                                                </div>
                                                <p className="text-sm text-gray-700 mb-2 leading-relaxed whitespace-pre-wrap">
                                                    {comment.text}
                                                </p>
                                                <button
                                                    onClick={() => likeComment(poll.id, comment.id)}
                                                    className="text-xs text-gray-500 hover:text-purple-600 transition-colors"
                                                >
                                                    ğŸ‘ {comment.likes > 0 && comment.likes}
                                                </button>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // ë­í‚¹ (ë¦¬ë”ë³´ë“œ) í™”ë©´
            const LeaderboardScreen = () => {
                const myRank = { id: 'my', name: `${user.name} (ë‚˜)`, coins: user.coins };
                const sortedLeaderboard = [...fakeLeaderboard, myRank]
                    .sort((a, b) => b.coins - a.coins);
                
                const myRankIndex = sortedLeaderboard.findIndex(u => u.id === 'my');

                return (
                    <div className="min-h-screen pb-20">
                        {/* Header */}
                        <div className="bg-white shadow-sm sticky top-0 z-10">
                            <div className="max-w-md mx-auto px-4 py-4">
                                <h1 className="text-2xl font-bold text-gray-800">ğŸ† ëª…ì˜ˆì˜ ì „ë‹¹</h1>
                                <p className="text-sm text-gray-600 mt-1">ìµœê³ ì˜ ì˜ˆì§€ë ¥ì„ ì¦ëª…í•˜ì„¸ìš”!</p>
                            </div>
                        </div>

                        {/* Leaderboard List */}
                        <div className="max-w-md mx-auto px-4 py-4">
                            {sortedLeaderboard.map((u, index) => (
                                <div 
                                    key={u.id}
                                    className={`flex items-center justify-between p-4 mb-2 rounded-lg ${u.id === 'my' ? 'bg-purple-100 border-2 border-purple-500' : 'bg-white shadow-sm'}`}
                                >
                                    <div className="flex items-center">
                                        <span className="text-lg font-bold w-10">
                                            {index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2
